import{d as R,h as Ie,B as $,v,T as K,i as U,C as _e,u as C,K as re,c as F,r as Ce,U as z,x as ae,G as w,o as A,k as W,I as _,A as N,V as Te,W as we,n as Ee,M as Oe,X as Se,b as J,Y as $e,F as x,l as ee,g as X,y as D,e as oe}from"./plugin-vue_export-helper.a3ace58a.js";import{H as Ne}from"./index.7fc017b7.js";import{b as Y,d as T,E as f,c as M,u as Fe,a as se,e as Be,f as ne,H as ke,O as Re,g as Le,h as He,i as Ae,j as ze}from"./index.e8ff5cba.js";import{i as Me,g as Ke,u as ie,w as ue,_ as P,e as Pe}from"./select-arrow.255c8fe4.js";const Ge={dir:{type:String,default:"horizontal"},merge:{type:Boolean,default:!1},deepMerge:{type:Boolean,default:!1},indent:{type:[Boolean,String],default:!1},gap:String,gapX:String,gapY:String,full:{type:[Boolean,String],default:!1},wrap:{type:Boolean,default:!1},align:{type:String,default:""},block:{type:Boolean,default:!1},size:{type:String,validator:Me},disabled:Boolean,fill:Boolean,type:{type:String,validator:Ke}},De=R({name:"Group",props:Ge,setup(e,{slots:o}){const{namespace:s}=ie("group"),l=r=>{var t;const a=((t=r.default)==null?void 0:t.call(r))||[];return i(a),a},i=r=>{r.forEach(t=>{var a;(t.shapeFlag&16&&!(t.shapeFlag&1)||t.shapeFlag&64||t.shapeFlag&128)&&i(t.children||[]);const u=((a=t.props)==null?void 0:a.class)||"";u.indexOf("group-item")===-1&&(t.props||(t.props={}),t.props.class=u+" group-item")})};return()=>Ie("div",{class:[s.value,e.dir,e.align,typeof e.full=="boolean"&&e.full?"full":e.full,e.indent?"indent":"",e.merge?"merge":"",e.deepMerge?"deep-merge":"",e.wrap?"wrap":"",e.block?"block":""],style:[typeof e.indent=="string"?`--indent:${e.indent}`:"",e.gap?`--group-gap-x: ${e.gap}; --group-gap-y: ${e.gap}`:"",e.gapX?`--group-gap-x: ${e.gapX}`:"",e.gapY?`--group-gap-y: ${e.gapY}`:""]},l(o))}}),Ue=ue(De),Ye=R({inheritAttrs:!1});function je(e,o,s,l,i,r){return $(e.$slots,"default")}var Ve=P(Ye,[["render",je],["__file","/Users/lizhiwei/my-project/hongluan/hongluan-ui/packages/components/collection/src/collection.vue"]]);const Je=R({name:"CollectionItem",inheritAttrs:!1});function Xe(e,o,s,l,i,r){return $(e.$slots,"default")}var We=P(Je,[["render",Xe],["__file","/Users/lizhiwei/my-project/hongluan/hongluan-ui/packages/components/collection/src/collection-item.vue"]]);const qe="data-collection-item",ce=e=>{const o=`${e}Collection`,s=`${o}Item`,l=Symbol(o),i=Symbol(s),r={...Ve,name:o,setup(){const a=v(null),u=new Map;K(l,{itemMap:u,getItems:()=>{const g=C(a);if(!g)return[];const d=Array.from(g.querySelectorAll(`[${qe}]`));return[...u.values()].sort((c,B)=>d.indexOf(c.ref)-d.indexOf(B.ref))},collectionRef:a})}},t={...We,name:s,setup(a,{attrs:u}){const h=v(null),g=U(l,void 0);K(i,{collectionItemRef:h}),_e(()=>{const d=C(h);d&&g.itemMap.set(d,{ref:d,...u})}),re(()=>{const d=C(h);g.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:l,COLLECTION_ITEM_INJECTION_KEY:i,HlCollection:r,HlCollectionItem:t}},Qe=Y({style:{type:T([String,Array,Object])},currentTabId:{type:T(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:T(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{HlCollection:Ze,HlCollectionItem:xe,COLLECTION_INJECTION_KEY:de,COLLECTION_ITEM_INJECTION_KEY:Fo}=ce("RovingFocusGroup"),pe=Symbol("hlRovingFocusGroup"),eo=Symbol("hlRovingFocusGroupItem"),oo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},no=(e,o)=>{if(o!=="rtl")return e;switch(e){case f.right:return f.left;case f.left:return f.right;default:return e}},to=(e,o,s)=>{const l=no(e.key,s);if(!(o==="vertical"&&[f.left,f.right].includes(l))&&!(o==="horizontal"&&[f.up,f.down].includes(l)))return oo[l]},lo=(e,o)=>e.map((s,l)=>e[(l+o)%e.length]),fe=e=>{const{activeElement:o}=document;for(const s of e)if(s===o||(s.focus(),o!==document.activeElement))return},te="currentTabIdChange",le="rovingFocusGroup.entryFocus",ro={bubbles:!1,cancelable:!0},ao=R({name:"RovingFocusGroupImpl",inheritAttrs:!1,props:Qe,emits:[te,"entryFocus"],setup(e,{emit:o}){var s;const l=v((s=e.currentTabId||e.defaultCurrentTabId)!=null?s:null),i=v(!1),r=v(!1),t=v(null),{getItems:a}=U(de,void 0),u=F(()=>[{outline:"none"},e.style]),h=p=>{o(te,p)},g=()=>{i.value=!0},d=M(p=>{var m;(m=e.onMousedown)==null||m.call(e,p)},()=>{r.value=!0}),E=M(p=>{var m;(m=e.onFocus)==null||m.call(e,p)},p=>{const m=!C(r),{target:k,currentTarget:O}=p;if(k===O&&m&&!C(i)){const L=new Event(le,ro);if(O==null||O.dispatchEvent(L),!L.defaultPrevented){const b=a().filter(S=>S.focusable),I=b.find(S=>S.active),j=b.find(S=>S.id===C(l)),V=[I,j,...b].filter(Boolean).map(S=>S.ref);fe(V)}}r.value=!1}),c=M(p=>{var m;(m=e.onBlur)==null||m.call(e,p)},()=>{i.value=!1}),B=(...p)=>{o("entryFocus",...p)};K(pe,{currentTabbedId:Ce(l),loop:z(e,"loop"),tabIndex:F(()=>C(i)?-1:0),rovingFocusGroupRef:t,rovingFocusGroupRootStyle:u,orientation:z(e,"orientation"),dir:z(e,"dir"),onItemFocus:h,onItemShiftTab:g,onBlur:c,onFocus:E,onMousedown:d}),ae(()=>e.currentTabId,p=>{l.value=p!=null?p:null}),Fe(t,le,B)}});function so(e,o,s,l,i,r){return $(e.$slots,"default")}var io=P(ao,[["render",so],["__file","/Users/lizhiwei/my-project/hongluan/hongluan-ui/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const uo=R({name:"RovingFocusGroup",components:{HlFocusGroupCollection:Ze,HlRovingFocusGroupImpl:io}});function co(e,o,s,l,i,r){const t=w("hl-roving-focus-group-impl"),a=w("hl-focus-group-collection");return A(),W(a,null,{default:_(()=>[N(t,Te(we(e.$attrs)),{default:_(()=>[$(e.$slots,"default")]),_:3},16)]),_:3})}var po=P(uo,[["render",co],["__file","/Users/lizhiwei/my-project/hongluan/hongluan-ui/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const fo=R({components:{HlRovingFocusCollectionItem:xe},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:s,loop:l,onItemFocus:i,onItemShiftTab:r}=U(pe,void 0),{getItems:t}=U(de,void 0),a=se(),u=v(null),h=M(c=>{o("mousedown",c)},c=>{e.focusable?i(C(a)):c.preventDefault()}),g=M(c=>{o("focus",c)},()=>{i(C(a))}),d=M(c=>{o("keydown",c)},c=>{const{key:B,shiftKey:p,target:m,currentTarget:k}=c;if(B===f.tab&&p){r();return}if(m!==k)return;const O=to(c);if(O){c.preventDefault();let b=t().filter(I=>I.focusable).map(I=>I.ref);switch(O){case"last":{b.reverse();break}case"prev":case"next":{O==="prev"&&b.reverse();const I=b.indexOf(k);b=l.value?lo(b,I+1):b.slice(I+1);break}}Ee(()=>{fe(b)})}}),E=F(()=>s.value===C(a));return K(eo,{rovingFocusGroupItemRef:u,tabIndex:F(()=>C(E)?0:-1),handleMousedown:h,handleFocus:g,handleKeydown:d}),{id:a,handleKeydown:d,handleFocus:g,handleMousedown:h}}});function go(e,o,s,l,i,r){const t=w("hl-roving-focus-collection-item");return A(),W(t,{id:e.id,focusable:e.focusable,active:e.active},{default:_(()=>[$(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Bo=P(fo,[["render",go],["__file","/Users/lizhiwei/my-project/hongluan/hongluan-ui/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const mo=Y({trigger:Be.trigger,effect:{...ne.effect,default:"light"},popperAppendToBody:{type:Boolean,default:void 0},teleported:ne.teleported,type:{type:T(String)},placement:{type:T(String),default:"bottom"},popperOptions:{type:T(Object),default:()=>({})},id:String,size:{type:String,default:""},split:{type:T(String),default:""},hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:T([Number,String]),default:0},maxHeight:{type:T([Number,String]),default:""},popperClass:{type:String,default:""},popperOffset:{type:Number,default:4},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:T(Object)}}),ko=Y({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divider:Boolean,textValue:String}),Ro=Y({onKeydown:{type:T(Function)}}),vo=[f.down,f.pageDown,f.home],ho=[f.up,f.pageUp,f.end],Lo=[...vo,...ho],{HlCollection:bo,HlCollectionItem:Ho,COLLECTION_INJECTION_KEY:Ao,COLLECTION_ITEM_INJECTION_KEY:zo}=ce("Dropdown"),yo=Symbol("hlDropdown"),Io=R({name:"Dropdown",components:{HlButton:Ne,HlGroup:Ue,HlScrollbar:ke,HlOnlyChild:Re,HlDropdownCollection:bo,HlTooltip:Le,HlRovingFocusGroup:po},props:mo,emits:["visible-change","click","command"],setup(e,{emit:o}){const s=Oe(),{namespace:l}=ie(),{t:i}=He(),r=v(),t=v(),a=v(null),u=v(null),h=v(null),g=v(null),d=v(!1),E=[f.enter,f.space,f.down],{compatTeleported:c}=Ae("Dropdown","popperAppendToBody"),B=F(()=>({maxHeight:ze(e.maxHeight)})),p=F(()=>[I.value]),m=se().value,k=F(()=>e.id||m);ae([r,z(e,"trigger")],([n,y],[H])=>{var q,Q,Z;const ye=Se(y)?y:[y];(q=H==null?void 0:H.$el)!=null&&q.removeEventListener&&H.$el.removeEventListener("pointerenter",G),(Q=n==null?void 0:n.$el)!=null&&Q.removeEventListener&&n.$el.removeEventListener("pointerenter",G),((Z=n==null?void 0:n.$el)==null?void 0:Z.addEventListener)&&ye.includes("hover")&&n.$el.addEventListener("pointerenter",G)},{immediate:!0}),re(()=>{var n,y;(y=(n=r.value)==null?void 0:n.$el)!=null&&y.removeEventListener&&r.value.$el.removeEventListener("pointerenter",G)});function O(){L()}function L(){var n;(n=a.value)==null||n.onClose()}function b(){var n;(n=a.value)==null||n.onOpen()}const{size:I}=Pe();function j(...n){o("command",...n)}function G(){var n,y;(y=(n=r.value)==null?void 0:n.$el)==null||y.focus()}function V(){}function S(){const n=C(u);n==null||n.focus(),g.value=null}function ge(n){g.value=n}function me(n){d.value||(n.preventDefault(),n.stopImmediatePropagation())}function ve(){o("visible-change",!0)}function he(n){(n==null?void 0:n.type)==="keydown"&&u.value.focus()}function be(){o("visible-change",!1)}return K(yo,{contentRef:u,role:F(()=>e.role),triggerId:k,isUsingKeyboard:d,onItemEnter:V,onItemLeave:S}),K("hlDropdown",{instance:s,dropdownSize:I,handleClick:O,commandHandler:j,trigger:z(e,"trigger"),hideOnClick:z(e,"hideOnClick")}),{t:i,namespace:l,scrollbar:h,wrapStyle:B,dropdownTriggerKls:p,dropdownSize:I,triggerId:k,triggerKeys:E,currentTabId:g,compatTeleported:c,handleCurrentTabIdChange:ge,handlerMainButtonClick:n=>{o("click",n)},handleEntryFocus:me,handleClose:L,handleOpen:b,handleBeforeShowTooltip:ve,handleShowTooltip:he,handleBeforeHideTooltip:be,onFocusAfterTrapped:n=>{var y,H;n.preventDefault(),(H=(y=u.value)==null?void 0:y.focus)==null||H.call(y,{preventScroll:!0})},popperRef:a,contentRef:u,triggeringElementRef:r,referenceElementRef:t}}}),_o=X("span",{class:"caret"},null,-1);function Co(e,o,s,l,i,r){var t;const a=w("hl-dropdown-collection"),u=w("hl-roving-focus-group"),h=w("hl-scrollbar"),g=w("hl-only-child"),d=w("hl-tooltip"),E=w("hl-button"),c=w("hl-group");return A(),J("div",{class:D([e.namespace+"-dropdown",e.disabled?"is-disabled":""])},[N(d,{ref:"popperRef",role:e.role,effect:e.effect,offset:e.popperOffset,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[`${e.namespace}-dropdown-popper`,e.popperClass],"reference-element":(t=e.referenceElementRef)==null?void 0:t.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":!!e.split,disabled:e.disabled,teleported:e.compatTeleported,transition:"dropdown","show-arrow":!1,persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},$e({content:_(()=>[N(h,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":"dropdown-list"},{default:_(()=>[N(u,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:_(()=>[N(a,null,{default:_(()=>[$(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style"])]),_:2},[e.split?void 0:{name:"default",fn:_(()=>[N(g,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:_(()=>[$(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","offset","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","teleported","onBeforeShow","onShow","onBeforeHide"]),e.split?(A(),W(c,{key:0,class:D([e.dropdownTriggerKls,"dropdown-button"])},{default:_(()=>[e.split==="button"?(A(),J(x,{key:0},[N(E,ee({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:_(()=>[$(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),N(E,ee({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",class:["caret-button",e.type?"is-active":""],size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("hl.dropdown.toggleDropdown"),equal:""}),{default:_(()=>[_o]),_:1},16,["id","class","size","type","disabled","tabindex","aria-label"])],64)):e.split==="link"?(A(),J(x,{key:1},[X("span",{ref:"referenceElementRef",class:D(["text-"+e.type,e.dropdownSize,e.disabled?"is-disabled":""]),style:{cursor:"pointer"},onClick:o[0]||(o[0]=()=>!e.disabled&&e.handlerMainButtonClick())},[$(e.$slots,"default")],2),X("span",{ref:"triggeringElementRef",class:D(["text-"+e.type,e.dropdownSize,e.disabled?"is-disabled":"","caret"]),style:{cursor:"pointer"}},null,2)],64)):oe("v-if",!0)]),_:3},8,["class"])):oe("v-if",!0)],2)}var To=P(Io,[["render",Co],["__file","/Users/lizhiwei/my-project/hongluan/hongluan-ui/packages/components/dropdown/src/dropdown.vue"]]);const Mo=ue(To);export{qe as C,yo as D,Lo as F,Ho as H,ho as L,eo as R,zo as a,Fo as b,Bo as c,ko as d,Ro as e,Ao as f,pe as g,de as h,fe as i,Ue as j,Mo as k,Ge as l,mo as m};
